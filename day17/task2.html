<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>IFE ECMAScript</title>
</head>

<body>
    <input id="dec-number" type="number" placeholder="输入一个十进制非负整数">
    <input id="bin-bit" type="number" placeholder="输入转化后二进制数字位数">
    <button id="trans-btn">转化为二进制</button>
    <p id="result">运算结果</p>
    <script>
        var decNumber = document.getElementById('dec-number');
        var transBtn = document.getElementById('trans-btn');
        var binBit = document.getElementById('bin-bit');
        var result = document.getElementById('result');
        var arr = [];
        var twoNum = 0;
        var num = 3;
        var str = '';
        function dec2bin(decNumber) {
            if (decNumber >= 0 && decNumber % 1 === 0) {
                for (var i = 0; ; i++) {
                    if (num == 0) {
                        break;
                    } else {
                        twoNum = num % 2;
                        num = parseInt(decNumber / 2);
                        decNumber = num;
                        arr.push(twoNum);
                    }
                }
            }
            // console.log(arr);

            for (var i = arr.length - 1; i >= 0; i--) {
                str += arr[i];
            }
            if (arr.length >= binBit.value) {
                result.innerHTML = str;
                console.log('错啦');
            } else {
                for (var i = 1; i <= binBit.value - arr.length; i++) {
                    str = 0 + str;
                }
                result.innerHTML = str;
            }

        }

        transBtn.onclick = function () {
            if (result.innerHTML != '运算结果') {
                result.innerHTML = ''; //这段代码无效
                var decNumberVal = decNumber.value;
                
                dec2bin(decNumberVal);
            }else {
                var decNumberVal = decNumber.value;
                dec2bin(decNumberVal);
            }

        }

    </script>
</body>

</html>